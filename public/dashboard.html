<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Vanessa — Leads Dashboard</title>
    <style>
      body {
        font: 14px/1.4 system-ui, sans-serif;
        margin: 24px;
      }
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
      }
      th {
        background: #f5f7fb;
        text-align: left;
      }
    </style>
  </head>
  <body>
    <h1>Vanessa — Leads</h1>
    <table id="t">
      <thead></thead>
      <tbody></tbody>
    </table>
    <script>
      fetch("/api/leads")
        .then((r) => r.json())
        .then((rows) => {
          const t = document.getElementById("t");
          if (!rows.length) {
            t.outerHTML = "<p>No leads yet.</p>";
            return;
          }
          const cols = Object.keys(rows[0]);
          t.querySelector("thead").innerHTML =
            "<tr>" + cols.map((c) => `<th>${c}</th>`).join("") + "</tr>";
          t.querySelector("tbody").innerHTML = rows
            .map(
              (r) =>
                "<tr>" +
                cols.map((c) => `<td>${r[c] || ""}</td>`).join("") +
                "</tr>"
            )
            .join("");
        });
    </script>
  </body>
</html>
